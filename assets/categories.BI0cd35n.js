import{i as L,j as D,g as N,u as O,k as T,b as W,d as H,c as Z,l as M,h as X,e as G,f as J}from"./app.BRqVfhQv.js";import{_ as Q}from"./YunPostCollapse.vue_vue_type_style_index_0_lang.DHTm-xwP.js";import{u as A}from"./chunks/vue-i18n.BJ8pk7YT.js";import{b as w,c as ee}from"./chunks/vue-router.gs0-Hl28.js";import{ab as C,X as v,bh as B,bE as l,b5 as n,Z as k,$ as i,F as _,c1 as m,a0 as y,bv as b,_ as R,bd as I,aZ as te,a8 as o,H as K,bf as S,bj as ae}from"./framework.CkDo6HBe.js";import{u as ne,a as oe}from"./animation.r5XOIINQ.js";import{_ as re}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.D2osPOJV.js";import"./chunks/dayjs.CPPL_t8N.js";import"./chunks/pinia.BVTiwpwu.js";/* empty css                    */import"./chunks/@vueuse/motion.BMAGmK78.js";import"./chunks/nprogress.D6qpKeA8.js";import"./index.BRXJGymZ.js";const le={class:"st-text"},se=C({__name:"YunCategoryChildItem",props:{i:{},categoryItem:{},parentKey:{}},setup(e){const{$tO:c}=L(),p=w(),t=v(()=>{const u=p.query.category||"";return Array.isArray(u)?[u]:u.split("/")});return(u,a)=>{const s=V,g=B("RouterLink");return l(D)(e.categoryItem)?(n(),k(s,{key:0,"parent-key":e.parentKey?`${e.parentKey}/${e.categoryItem.name}`:e.categoryItem.name,category:e.categoryItem,collapsable:!t.value.includes(e.categoryItem.name)},null,8,["parent-key","category","collapsable"])):(n(),i(_,{key:1},[e.categoryItem.title?(n(),k(g,{key:0,to:e.categoryItem.path||"",class:"inline-flex items-center gap-2 px-3 py-2 w-full rounded",hover:"bg-black/5"},{default:m(()=>[a[0]||(a[0]=y("div",{"i-ri-file-text-line":""},null,-1)),y("span",le,b(l(c)(e.categoryItem.title)),1)]),_:1},8,["to"])):R("v-if",!0)],64))}}}),ce={key:0,"i-ri-folder-add-line":""},ie={key:1,class:"text-$va-c-primary dark:text-$va-c-primary-lighter","i-ri-folder-reduce-line":""},ue={class:"rounded-full px-1.5 bg-black/5 shadow-sm op-60",text:"xs"},me={key:0},V=C({__name:"YunCategory",props:{i:{},parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(e){const c=e,p=ee(),t=I(c.collapsable),{t:u}=A(),{$t:a}=L(),s=I(),{show:g}=ne(s);function $(f){t.value=!1,p.push({query:{category:f}}),g()}te(()=>{const f=document.querySelector(".post-collapse-container");f&&(s.value=f)});const h=I();return c.level===1&&oe(h,{i:c.i||0,y:20,duration:200}),(f,r)=>{const Y=se;return n(),i(_,null,[y("li",{ref_key:"categoryRef",ref:h,class:"category-list-item inline-flex items-center cursor-pointer w-full gap-2 px-3 py-2 rounded",hover:"bg-black/5"},[y("span",{class:"folder-action inline-flex",hover:"text-$va-c-primary-lighter",onClick:r[0]||(r[0]=d=>t.value=!t.value)},[t.value?(n(),i("div",ce)):(n(),i("div",ie))]),y("span",{class:"category-name inline-flex items-center gap-2 w-full",onClick:r[1]||(r[1]=d=>$(e.parentKey))},[y("span",null,b(e.category.name==="Uncategorized"?l(u)("category.uncategorized"):l(a)(e.category.name)),1),y("span",ue,b(e.category.total),1)])],512),o(K,{"enter-active-class":"v-enter-active","enter-from-class":"v-enter-from","leave-active-class":"v-leave-active","leave-to-class":"v-leave-to",duration:{enter:200,leave:0}},{default:m(()=>[t.value?R("v-if",!0):(n(),i("ul",me,[(n(!0),i(_,null,S(e.category.children.values(),(d,x)=>(n(),i("li",{key:x,class:"post-list-item text-$va-c-text",m:"l-4",hover:"text-$va-c-primary-lighter"},[o(Y,{i:x,"category-item":d,"parent-key":e.parentKey},null,8,["i","category-item","parent-key"])]))),128))]))]),_:1})],64)}}}),ye={flex:"~ col"},pe=C({__name:"YunCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(e){const c=w(),p=v(()=>{const t=c.query.category||"";return Array.isArray(t)?[t]:t.split("/")});return(t,u)=>{const a=V;return n(),i("div",ye,[(n(!0),i(_,null,S(e.categories.values(),(s,g)=>(n(),i("ul",{key:s.name,class:"category-list"},[o(a,{i:g,"parent-key":s.name,category:s,level:e.level+1,collapsable:!p.value.includes(s.name)},null,8,["i","parent-key","category","level","collapsable"])]))),128))])}}}),ge={text:"center",class:"yun-text-light",p:"2"},we=C({__name:"categories",setup(e){const{t:c}=A(),p=N(),t=O(),u=w(),a=v(()=>u.query.category||""),s=T(),g=v(()=>(t.value.icon||(t.value.icon="i-ri-folder-2-line"),t.value.icon)),$=v(()=>p.postList.filter(r=>r.categories&&a.value!=="Uncategorized"?typeof r.categories=="string"?r.categories===a.value:r.categories.join("/").startsWith(a.value)&&r.categories[0]===a.value.split("/")[0]:!r.categories&&a.value==="Uncategorized"?r.categories===void 0:!1)),{$tO:h}=L();return W([H({"@type":"CollectionPage"})]),(f,r)=>{const Y=Z,d=re,x=pe,z=B("RouterView"),j=Q,q=M,E=X,F=G,P=J;return n(),i(_,null,[o(F,null,{default:m(()=>[o(Y),o(z,null,{default:m(({Component:U})=>[(n(),k(ae(U),null,{"main-header":m(()=>[o(d,{title:l(h)(l(t).title)||l(c)("menu.categories"),icon:g.value,color:l(t).color,"page-title-class":l(t).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":m(()=>[o(K,{"enter-active-class":"animate-fade-in animate-duration-400",appear:""},{default:m(()=>[y("div",ge,b(l(c)("counter.categories",Array.from(l(s).children).length)),1)]),_:1}),o(x,{categories:l(s).children},null,8,["categories"]),o(z)]),"main-nav-before":m(()=>[a.value?(n(),k(q,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:m(()=>[o(d,{m:"t-10",title:a.value==="Uncategorized"?l(c)("category.uncategorized"):a.value.split("/").join(" / "),icon:"i-ri-folder-open-line"},null,8,["title"]),o(j,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:$.value},null,8,["posts"])]),_:1})):R("v-if",!0)]),_:1}))]),_:1}),o(E)]),_:1}),o(P)],64)}}});export{we as default};
